(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{8803:function(e,r,n){Promise.resolve().then(n.bind(n,8274))},8274:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return i}});var t=n(7437),s=n(7727),a=n(4033),l=n(2265);function i(e){let{children:r}=e,{user:n}=(0,s.a)(),i=(0,a.useRouter)();return((0,l.useEffect)(()=>{n&&"管理者"===n.rank||i.push("/")},[n,i]),n&&"管理者"===n.rank)?(0,t.jsxs)("div",{className:"grid h-screen",style:{gridTemplateColumns:"280px 1fr"},children:[(0,t.jsxs)("aside",{className:"bg-white border-r",children:[(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("h1",{className:"text-xl font-semibold text-[#2C3E50]",children:"管理者ダッシュボード"})}),(0,t.jsxs)("nav",{className:"px-4",children:[(0,t.jsxs)("a",{href:"/admin",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"\uD83D\uDCCA"}),(0,t.jsx)("span",{children:"ダッシュボード"})]}),(0,t.jsxs)("a",{href:"/admin/level-messages",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"⚡"}),(0,t.jsx)("span",{children:"レベルメッセージ管理"})]}),(0,t.jsxs)("a",{href:"/admin/notices",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"\uD83D\uDCE2"}),(0,t.jsx)("span",{children:"お知らせ管理"})]}),(0,t.jsxs)("a",{href:"/admin/users",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"\uD83D\uDC65"}),(0,t.jsx)("span",{children:"ユーザー管理"})]}),(0,t.jsxs)("a",{href:"/admin/badges",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"\uD83C\uDFC6"}),(0,t.jsx)("span",{children:"バッジ管理"})]}),(0,t.jsxs)("a",{href:"/admin/courses",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"\uD83D\uDCDA"}),(0,t.jsx)("span",{children:"コース管理"})]}),(0,t.jsxs)("a",{href:"/admin/events",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"\uD83C\uDFAE"}),(0,t.jsx)("span",{children:"イベント管理"})]}),(0,t.jsxs)("a",{href:"/admin/forum",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"\uD83D\uDCAC"}),(0,t.jsx)("span",{children:"フォーラム管理"})]}),(0,t.jsxs)("a",{href:"/admin/shop",className:"flex items-center gap-3 px-4 py-3 text-[#2C3E50] hover:bg-[#F0F4F8] rounded-md",children:[(0,t.jsx)("span",{children:"\uD83D\uDECD"}),(0,t.jsx)("span",{children:"ショップ管理"})]})]})]}),(0,t.jsx)("main",{className:"bg-[#F5F7FB] overflow-auto",children:(0,t.jsx)("div",{className:"p-6",children:r})})]}):null}},8096:function(e,r,n){"use strict";var t=n(2698);let s=t.Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let r=localStorage.getItem("auth_token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e}),s.interceptors.response.use(e=>e,async e=>{var r;if((null===(r=e.response)||void 0===r?void 0:r.status)===401){localStorage.removeItem("auth_token");let e=window.location.pathname;"/login"!==e&&"/"!==e&&(window.location.href="/login")}return Promise.reject(e)}),r.Z=s},7727:function(e,r,n){"use strict";n.d(r,{a:function(){return h}});var t,s=n(2265);let a=e=>{let r;let n=new Set,t=(e,t)=>{let s="function"==typeof e?e(r):e;if(!Object.is(s,r)){let e=r;r=(null!=t?t:"object"!=typeof s||null===s)?s:Object.assign({},r,s),n.forEach(n=>n(r,e))}},s=()=>r,a={setState:t,getState:s,getInitialState:()=>l,subscribe:e=>(n.add(e),()=>n.delete(e))},l=r=e(t,s,a);return a},l=e=>e?a(e):a,i=e=>e,o=e=>{let r=l(e),n=e=>(function(e,r=i){let n=s.useSyncExternalStore(e.subscribe,()=>r(e.getState()),()=>r(e.getInitialState()));return s.useDebugValue(n),n})(r,e);return Object.assign(n,r),n};var c=n(8096);let u=e=>["お試し","退会者","初伝","中伝","奥伝","皆伝","管理者"].includes(e),d=e=>{if(!e.rank||!u(e.rank))throw Error("Invalid user rank");return{id:e.id,email:e.email,name:e.name,rank:e.rank,mongoId:e.mongoId}},h=(t=e=>({user:null,loading:!1,error:null,initialized:!1,login:async(r,n)=>{e({loading:!0,error:null});try{let t;t=n?await c.Z.post("/auth/login",{email:r,password:n}):await c.Z.get("/auth/verify",{headers:{Authorization:"Bearer ".concat(r)}});let{success:s,token:a,user:l}=t.data;if(s&&a&&l){let r=d(l);return localStorage.setItem("auth_token",a),e({user:r,loading:!1,error:null}),!0}return e({error:t.data.message||"認証に失敗しました",loading:!1}),!1}catch(r){return localStorage.removeItem("auth_token"),e({user:null,error:"認証に失敗しました",loading:!1}),!1}},logout:()=>{localStorage.removeItem("auth_token"),e({user:null,loading:!1,error:null})},setInitialized:r=>e({initialized:r})}))?o(t):o},622:function(e,r,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=n(2265),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,n){var t,a={},c=null,u=null;for(t in void 0!==n&&(c=""+n),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(u=r.ref),r)l.call(r,t)&&!o.hasOwnProperty(t)&&(a[t]=r[t]);if(e&&e.defaultProps)for(t in r=e.defaultProps)void 0===a[t]&&(a[t]=r[t]);return{$$typeof:s,type:e,key:c,ref:u,props:a,_owner:i.current}}r.Fragment=a,r.jsx=c,r.jsxs=c},7437:function(e,r,n){"use strict";e.exports=n(622)},4033:function(e,r,n){e.exports=n(8165)}},function(e){e.O(0,[829,971,596,744],function(){return e(e.s=8803)}),_N_E=e.O()}]);